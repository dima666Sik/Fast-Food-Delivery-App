server:
  port: 8080

spring:
  application:
    name: gateway-oauth-service
  cloud:
    gateway:
      discovery:
        locator:
          lower-case-service-id: true
          enabled: true
      routes:
        - id: product-service-route
          uri: lb://product-service
          predicates:
            - Path=/product-service/**

        - id: order-service-route
          uri: lb://order-service
          predicates:
            - Path=/order-service/**

        - id: searcher-service-route
          uri: lb://searcher-service
          predicates:
            - Path=/searcher-service/**

        - id: credit-card-service-route
          uri: lb://credit-card-service
          predicates:
            - Path=/credit-card-service/**

        - id: email-sender-service-route
          uri: lb://email-sender-service
          predicates:
            - Path=/email-sender-service/**

        - id: chat-gpt-service-route
          uri: lb://chat-gpt-service
          predicates:
            - Path=/chat-gpt-service/**

  config:
    import:
      - .env[.properties]

  r2dbc:
    url: ${R2DBC_URL}
    username: ${USER_NAME_DB}
    password: ${PASSWORD_DB}

  #Liquibase configuration
  liquibase:
    url: ${JDBC_URL}
    user: ${USER_NAME_DB}
    password: ${PASSWORD_DB}
    enabled: true


#Eureka configuration
eureka:
  client:
    service-url:
      defaultZone: ${DEFAULT_ZONE_EUREKA}

#JWT token configuration
back-end:
  security:
    jwt:
      access:
        expiration: ${JWT_ACCESS_EXPIRATION}
      refresh:
        expiration: ${JWT_REFRESH_EXPIRATION}
    # This list is used to exclude paths from authentication processing when security configuration is enabled
    auth-whitelist: ${AUTH_WHITELIST}
    custom:
      allowed:
        paths: ${ALLOWED_PATHS:}

#Frontend uri
front-end:
  uri: ${FRONT_END_URI}

#Logging configuration
logging:
  level:
    org:
      springframework:
        r2dbc: DEBUG
    liquibase: DEBUG

# Testing configuration
---
spring:
  config:
    activate:
      on-profile: test
    import:
      - .env[.properties]
  r2dbc:
    url: ${R2DBC_TEST_URL}
    username: test
    password: test
  liquibase:
    url: ${JDBC_TEST_URL}
    user: test
    password: test
    enabled: true
    change-log: classpath:db/changelog/db.changelog-master.yaml
back-end:
  security:
    jwt:
      access:
        expiration: ${JWT_ACCESS_EXPIRATION}
      refresh:
        expiration: ${JWT_REFRESH_EXPIRATION}
---